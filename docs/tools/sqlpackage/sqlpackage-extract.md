---
title: Извлечение SqlPackage
description: Узнайте, как автоматизировать задачи разработки баз данных с помощью извлечения SqlPackage.exe. Ознакомьтесь с примерами и параметрами публикации, свойствами и переменными SQLCMD.
ms.prod: sql
ms.prod_service: sql-tools
ms.technology: tools-other
ms.topic: conceptual
ms.assetid: 198198e2-7cf4-4a21-bda4-51b36cb4284b
author: dzsquared
ms.author: drskwier
ms.reviewer: maghan; sstein
ms.date: 12/11/2020
ms.openlocfilehash: abefb39814213426d863fa3839c4095eadc82249
ms.sourcegitcommit: 866554663ca3191748b6e4eb4d8d82fa58c4e426
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/16/2020
ms.locfileid: "97577919"
---
# <a name="sqlpackage-extract-parameters-and-properties"></a>Параметры и свойства извлечения SqlPackage
Действие извлечения SqlPackage.exe приводит к созданию схемы активной базы данных из SQL Server или базы данных SQL Azure в пакет DACPAC (DACPAC-файл). По умолчанию данные в DACPAC-файл не включаются. Чтобы их включить, используйте [действие экспорта](sqlpackage-export.md). 

## <a name="command-line-syntax"></a>Синтаксис для командной строки

Программа **SqlPackage.exe** инициирует действия, заданные с использованием параметров, свойств и переменных SQLCMD, указанных в командной строке.  
  
```bash
SqlPackage {parameters}{properties}{SQLCMD Variables}  
```

> [!NOTE]
> При извлечении базы данных с учетными данными паролей (например, для проверки подлинности пользователей SQL) пароль заменяется другим паролем соответствующей сложности. Пользователи SqlPackage или DacFx должны изменить пароль после публикации DACPAC-файла.

## <a name="parameters-for-the-extract-action"></a>Параметры действия извлечения

|Параметр|Краткая форма|Значение|Описание|
|---|---|---|---|
|**/Action:**|**/a**|Extract|Указывает действие, подлежащее выполнению. |
|**/AccessToken:**|**/at**|{строка}| Указывает маркер доступа для проверки подлинности на основе маркеров. Этот маркер используется при подключении к целевой базе данных. |
|**/Diagnostics:**|**/d**|{True&#124;False}|Указывает, следует ли выводить сведения из журнала диагностики в консоль. Значение по умолчанию — False. |
|**/DiagnosticsFile:**|**/df**|{строка}|Указывает файл, в котором следует вести журнал диагностики. |
|**/MaxParallelism:**|**/mp**|{целое_число}| Задает степень параллелизма для параллельных операций с базой данных. Значение по умолчанию: 8. |
|**/OverwriteFiles:**|**/of**|{True&#124;False}|Указывает, должна ли программа sqlpackage.exe перезаписывать существующие файлы. Задание значения false приводит к тому, что программа sqlpackage.exe прерывает действие при обнаружении существующего файла. Значение по умолчанию равно True. |
|**/Properties:**|**/p**|{имя_свойства}={значение}|Указывает пару "имя-значение" для свойства действия; {имя_свойства}={значение}. Имена свойств действия см. в справке по данным действиям. Например: sqlpackage.exe /Action:Extract /?. |
|**/Quiet:**|**/q**|{True&#124;False}|Указывает, происходит ли подавление подробного отзыва. Значение по умолчанию — False. |
|**/SourceConnectionString:**|**/scs**|{строка}|Указывает допустимую строку подключения SQL Server/Azure для базы данных-источника. Если этот параметр указан, ему будет отдаваться предпочтение перед всеми остальными параметрами источника. |
|**/SourceDatabaseName:**|**/sdn**|{строка}|Определяет имя базы данных-источника. |
|**/SourceEncryptConnection:**|**/sec**|{True&#124;False}|Указывает, следует ли использовать шифрование SQL для соединения с базой данных-источником. |
|**/SourcePassword:**|**/sp**|{строка}|В сценариях с проверкой подлинности SQL Server — определяет пароль для доступа к базе данных-источнику. |
|**/SourceServerName:**|**/ssn**|{строка}|Определяет имя сервера, где размещается база данных-источник. |
|**/SourceTimeout:**|**/st**|{целое_число}|Задает время ожидания подключения к базе данных-источнику (в секундах). |
|**/SourceTrustServerCertificate:**|**/stsc**|{True&#124;False}|Определяет, используется ли протокол TLS для шифрования подключения к базе данных-источнику без прохода по цепочке сертификатов для проверки доверия. |
|**/SourceUser:**|**/su**|{строка}|В сценариях с проверкой подлинности SQL Server — определяет пользователя SQL Server для доступа к базе данных-источнику. |
|**/TargetFile:**|**/tf**|{строка}| Указывает целевой файл (то есть DACPAC-файл) для использования в качестве целевого объекта действия вместо базы данных. Если используется этот параметр, все остальные параметры целевого объекта будут недействительны. Этот параметр будет недопустимым для действий, которые поддерживают только целевые объекты базы данных.| 
|**/TenantId:**|**/tid**|{строка}|Представляет ИД клиента AAD или доменное имя. Этот параметр необходим для поддержки гостевых или импортированных пользователей AAD, а также учетных записей Майкрософт, например outlook.com, hotmail.com или live.com. Если этот параметр пропущен, будет использоваться ИД клиента по умолчанию для AAD. При этом предполагается, что прошедший проверку подлинности пользователь является собственным пользователем для этого AD. Однако в этом случае все гостевые или импортированные пользователи и (или) учетные записи Майкрософт, размещенные в этой службе AAD, не поддерживаются, и операция завершится ошибкой. <br/> Дополнительные сведения об универсальной проверке подлинности Active Directory см. в статье [Универсальная проверка подлинности с Базой данных SQL и Azure Synapse Analytics (поддержка SSMS для MFA)](/azure/sql-database/sql-database-ssms-mfa-authentication).|
|**/UniversalAuthentication:**|**/ua**|{True&#124;False}|Указывает, следует ли использовать универсальную проверку подлинности. Если задано значение true, протокол интерактивной проверки подлинности активируется с поддержкой MFA. Этот параметр также можно применять для проверки подлинности AAD без MFA, используя интерактивный протокол, где пользователю необходимо ввести имя пользователя и пароль, или встроенную проверку подлинности (учетные данные Windows). Если для элемента /UniversalAuthentication задано значение True, в элементе SourceConnectionString (/scs) не может быть указана проверка подлинности AAD. Если для элемента /UniversalAuthentication задано значение False, в элементе SourceConnectionString (/scs) должна быть указана проверка подлинности AAD. <br/> Дополнительные сведения об универсальной проверке подлинности Active Directory см. в статье [Универсальная проверка подлинности с Базой данных SQL и Azure Synapse Analytics (поддержка SSMS для MFA)](/azure/sql-database/sql-database-ssms-mfa-authentication).|

## <a name="properties-specific-to-the-extract-action"></a>Свойства, относящиеся к действию извлечения

|Свойство|Значение|Описание|
|---|---|---|
|**/p:**|CommandTimeout=(INT32 '60')|Задает время ожидания команды в секундах при выполнении запросов к SQL Server.|
|**/p:**|DacApplicationDescription=(STRING)|Определяет описание приложения для сохранения в метаданных DACPAC.|
|**/p:**|DacApplicationName=(STRING)|Определяет имя приложения для сохранения в метаданных DACPAC. Значением по умолчанию является имя базы данных.|
|**/p:**|DacMajorVersion=(INT32 '1')|Определяет основную версию для сохранения в метаданных DACPAC.|
|**/p:**|DacMinorVersion=(INT32 '0')|Определяет дополнительный номер версии для сохранения в метаданных DACPAC.|
|**/p:**|DatabaseLockTimeout=(INT32 '60')| Позволяет задать превышение времени ожидания блокировки в секундах для базы данных при выполнении запросов к SQL Server. Для ожидания без ограничений используйте значение "-1".|
|**/p:**|ExtractAllTableData=(BOOLEAN)|Указывает, извлекаются ли данные из всех пользовательских таблиц. Если задано значение true, данные извлекаются из всех пользовательских таблиц и нельзя указать отдельные пользовательские таблицы для извлечения данных. Если задано значение false, укажите одну или несколько пользовательских таблиц для извлечения данных.|
|**/p:**|ExtractApplicationScopedObjectsOnly=(BOOLEAN 'True')|Если задано значение true, то из указанного источника извлекаются только объекты в области приложения. Если задано значение false, то из указанного источника извлекаются все объекты.|
|**/p:**|ExtractReferencedServerScopedElements=(BOOLEAN 'True')|Если задано значение true, извлекаются объекты имени для входа, аудита сервера и учетных данных, на которые ссылаются объекты из базы данных-источника.|
|**/p:**|ExtractUsageProperties=(BOOLEAN)|Указывает, будут ли извлечены свойства использования, такие как количество строк в таблице и размер индекса, из базы данных.|
|**/p:**|IgnoreExtendedProperties=(BOOLEAN)|Указывает, следует ли пропускать расширенные свойства.|
|**/p:**|IgnorePermissions=(BOOLEAN 'True')|Указывает, следует ли не учитывать разрешения.|
|**/p:**|IgnoreUserLoginMappings=(BOOLEAN)|Указывает, будут ли игнорироваться связи между пользователями и именами для входа.|
|**/p:**|LongRunningCommandTimeout=(INT32)| Позволяет задать время ожидания в секундах для длительной команды при выполнении запросов к SQL Server. Для ожидания без ограничений используйте значение "0".|
|**/p:**|Storage=({File&#124;Memory} 'File')|Указывает тип резервного хранилища для модели схемы, используемой во время извлечения.|
|**/p:**|TableData=(STRING)|Указывает таблицу, из которой будут извлечены данные. Укажите имя таблицы со скобками или без скобок. Имя должно быть указано в формате: имя_схемы.идентификатор_таблицы. Этот параметр можно указывать несколько раз.|
|**/p:**| TempDirectoryForTableData=(STRING)|Указывает временный каталог, используемый для буферизации табличных данных перед записью в файл пакета.|
|**/p:**|VerifyExtraction=(BOOLEAN)|Указывает, следует ли проверять извлеченный DACPAC-файл.|

## <a name="next-steps"></a>Next Steps

- См. подробнее о [sqlpackage](sqlpackage.md)